<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Useful Tricks"><meta name="keywords" content=""><meta name="author" content="Yychi,guyueshui002@gmail.com"><meta name="copyright" content="Yychi"><title>Useful Tricks | 水阙</title><link rel="shortcut icon" href="/cali.png"><link rel="stylesheet" href="/css/index.css?version=1.6.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.0"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?a37e52e4ac68b7bedc09537444f68899";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-132747551-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="author-info"><div class="author-info__avatar text-center"><img src="https://guyueshui.github.io/assets/avatar.png"></div><div class="author-info__name text-center">Yychi</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">32</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">32</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">3</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://ruanzz.github.io">Ryan's Blog</a><a class="author-info-links__name text-center" href="http://www.matrix67.com/blog/">Matrix67</a><a class="author-info-links__name text-center" href="/links">More...</a></div></div></div><nav id="nav" style="background-image: url(https://s2.ax1x.com/2019/02/19/kgD6g0.png)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">水阙</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/sketch">札记</a><a class="site-page" href="/tricks">Tricks</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/about">About</a></span></div><div id="site-info"><div id="site-title">水阙</div><div id="site-sub-title">向往水的温柔，在心底打着卷儿。</div><div id="site-social-icons"><a class="social-icon" href="https://github.com/guyueshui"><i class="fa-github fa"></i></a><a class="social-icon" href="https://weibo.com/yychifyu"><i class="fa-weibo fa"></i></a></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><article id="page"><h1>Useful Tricks</h1><div class="article-container"><p>此页内容多为软件使用技巧，绝大部分内容来自互联网，如有侵权，请与<a href="mailto:guyueshui002@gmail.com" target="_blank" rel="noopener">我</a>联系。也有部分内容系自己使用软件所得的一些经验，仅供参考。</p>
<h2 id="FFmepg"><a href="#FFmepg" class="headerlink" title="FFmepg"></a>FFmepg</h2><h3 id="转视频为gif"><a href="#转视频为gif" class="headerlink" title="转视频为gif"></a>转视频为gif</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i input.mkv out.gif</span><br></pre></td></tr></table></figure>
<p>又：加速播放。假设原视频 60 fps，输出降到 30 fps，丢掉一半的帧。<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -r 60 -i input.mkv -r 30 out.gif</span><br></pre></td></tr></table></figure></p>
<p>又：不想丢帧。将输入扩大一倍，输出保留原样。<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -r 120 -i input.mkv -r 60 out.gif</span><br></pre></td></tr></table></figure></p>
<p>又：不想全转。从视频的第2秒开始，截取3秒转化为gif。<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 从视频中第二秒开始，截取时长为3秒的片段转化为 gif</span></span><br><span class="line">ffmpeg -t 3 -ss 00:00:02 -i input.mkv out-clip.gif</span><br></pre></td></tr></table></figure></p>
<p>又：控制转化质量。<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 默认转化是中等质量模式，若要转化出高质量的 gif，可以修改比特率</span></span><br><span class="line">ffmpeg -i input.mkv -b 2048k out.gif</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="ImageMagick"><a href="#ImageMagick" class="headerlink" title="ImageMagick"></a>ImageMagick</h2><hr>
<h2 id="Vim"><a href="#Vim" class="headerlink" title="Vim"></a>Vim</h2><hr>
<h2 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h2><h3 id="行内操作"><a href="#行内操作" class="headerlink" title="行内操作"></a>行内操作</h3><ul>
<li><code>^a</code>: jump to BOL</li>
<li><code>^e</code>: jump to EOL</li>
<li><code>^u</code>: delete the line</li>
<li><code>^k</code>: delete to EOL</li>
<li><code>^w</code>: delete a word forward</li>
<li><code>alt+f</code>: jump a word forward</li>
<li><code>alt+b</code>: jump a word backward</li>
<li><code>^r</code>: search history</li>
<li><code>alt+.</code>: complete second parameter</li>
</ul>
<h3 id="任务控制"><a href="#任务控制" class="headerlink" title="任务控制"></a>任务控制</h3><ol>
<li>执行<code>command</code></li>
<li>按<code>^z</code>挂起当前job</li>
<li>按<code>bg</code>后台继续该job</li>
<li>按<code>fg</code>召回前台</li>
</ol>
<h3 id="后台运行命令"><a href="#后台运行命令" class="headerlink" title="后台运行命令"></a>后台运行命令</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &amp;</span><br></pre></td></tr></table></figure>
<p>或者如果你不想看到任何输出，使用<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &amp;&gt; /dev/null &amp;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>如此你可以继续使用当前shell</li>
<li>使用<code>bg</code>查看是否有任务在后台运行</li>
<li>使用<code>jobs</code>查看后台任务</li>
<li>使用<code>fg</code>将任务召回前台</li>
<li>不能退出shell，否则进程会被杀掉</li>
<li><strong>使用<code>disown</code>丢掉进程，可以退出shell</strong></li>
</ul>
<p>又：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup <span class="built_in">command</span> &amp;&gt; /dev/null &amp;</span><br></pre></td></tr></table></figure></p>
<p>等价于以上的操作。单纯的<code>nohup command</code>会在当前目录创建一个隐藏文件以写入命令的输出。以上命令将程序的输出重定向至比特桶丢弃。</p>
<hr>
<h2 id="Command-find"><a href="#Command-find" class="headerlink" title="Command find"></a>Command <code>find</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ find --<span class="built_in">help</span></span><br><span class="line">Usage: find [-H] [-L] [-P] [-Olevel] [-D <span class="built_in">help</span>|tree|search|<span class="built_in">stat</span>|rates|opt|<span class="built_in">exec</span>] [path...] [expression]</span><br></pre></td></tr></table></figure>
<p>前面的选项不常用，初级使用只需掌握<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find [path...] [expression]</span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>path</code> - search path</li>
<li><code>expression</code> - expands to <code>-options [-print -exec -ok]</code><ul>
<li><code>-options</code>: 指定find常用选项</li>
<li><code>-print</code>: 将匹配到的文件写入标准输出[默认]</li>
<li><code>-exec</code>: 在匹配到的文件上执行一串命令。格式为<code>&lt;command&gt; {} \;</code>，注意 {} 和 \; 之间的空格。<ul>
<li><code>find . -size 0 -exec rm {} \;</code> - 删除当前目录下size为0的文件</li>
<li><code>rm -i $(find . -size 0)</code> - 同上</li>
<li><code>find . -size 0 | xargs rm -f &amp;</code> - 同上</li>
</ul>
</li>
<li><code>-ok</code>: 同上，执行命令前会询问</li>
</ul>
</li>
</ul>
<p><strong>常用选项</strong></p>
<ul>
<li>name - 按照文件名查找<ul>
<li><code>find &lt;dir&gt; -name &quot;*.cpp&quot;</code>: 在目录dir下查找后缀为cpp的文件</li>
</ul>
</li>
<li>perm - 按照文件权限查找</li>
<li>user - 按照文件所有者查找</li>
<li>group - 按照文件所有组查找</li>
<li>type - 按照文件类型查找</li>
<li>size - 按照文件大小查找</li>
<li>…</li>
</ul>
<p><strong>几个例子</strong></p>
<ul>
<li><code>find . -name &quot;*name*&quot;</code> - 找出当前文件夹文件名包含“name”的文件</li>
<li><code>find . ! -type d -print</code> - 在当前目录查找非目录文件</li>
<li><code>find . -newer file1 ! file2</code> - 查找比file1新但比file2旧的文件</li>
</ul>
<hr>
<h2 id="Command-grep"><a href="#Command-grep" class="headerlink" title="Command grep"></a>Command <code>grep</code></h2><hr>
<h2 id="Command-sed"><a href="#Command-sed" class="headerlink" title="Command sed"></a>Command <code>sed</code></h2><hr>
<h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><p>使用 <code>git log</code> 查看提交历史，但是输出冗杂。通常使用<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --oneline --abbrev-commit --all --graph --decoreate --color</span><br></pre></td></tr></table></figure></p>
<p>来获得更美观易读的输出。但是每次输入这么多肯定很烦人，使用<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global alias.graph <span class="string">"log --graph --oneline --decorate=short"</span></span><br></pre></td></tr></table></figure></p>
<p>增加一个全局别名，这个别名对于任何地方的 <code>git</code> 都适用。如此一来，键入 <code>git graph</code> 会等效于<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --graph --oneline --decorate=short</span><br></pre></td></tr></table></figure></p>
<p>样例输出：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git graph</span><br><span class="line"></span><br><span class="line">* 36f2d65 (HEAD -&gt; master, origin/master, origin/HEAD) Forget it</span><br><span class="line">* 9b4a6d7 Update ref list</span><br><span class="line">* 3931d4d Using relative path <span class="keyword">for</span> image</span><br><span class="line">* ba18821 Upload pics</span><br><span class="line">* ceca69a fixed reference</span><br><span class="line">* be15df2 fixed picture address</span><br><span class="line">* 97a36f3 Initial commit</span><br></pre></td></tr></table></figure></p>
<p><strong>忽略已经添加的文件</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached &lt;somefiles&gt;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="Aria2c"><a href="#Aria2c" class="headerlink" title="Aria2c"></a>Aria2c</h2><p><a href="https://aria2.github.io/" target="_blank" rel="noopener">aria2c</a> 是是个好东西。</p>
<p>配置：参考 <a href="https://binux.blog/2012/12/aria2-examples/" target="_blank" rel="noopener">aria2配置示例</a><br>webui:</p>
<ul>
<li><a href="http://binux.github.io/yaaw/demo/" target="_blank" rel="noopener">YAAW</a></li>
<li><a href="https://ziahamza.github.io/webui-aria2/#" target="_blank" rel="noopener">ziahamza</a></li>
</ul>
<blockquote>
<p>Note: jsonrpc 地址格式为 <code>http://token:&lt;yoursecret&gt;@hostname:port/jsonrpc</code></p>
</blockquote>
<p><center>
<img src="https://i.loli.net/2018/12/28/5c263327c4214.png" width="500">
</center></p>
<blockquote>
<p>令牌填写自己设置的 <code>rpc-secret</code></p>
</blockquote>
<p><center><img src="https://i.loli.net/2018/12/28/5c263398854c3.png" width="500"></center></p>
<blockquote>
<p><code>xxx</code> 替换为自己设置的 <code>rpc-secret</code></p>
</blockquote>
<h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><p>给网页添加BGM。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">embed</span> <span class="attr">src</span>=<span class="string">"bgm.mp3"</span> <span class="attr">autostart</span>=<span class="string">"true"</span> <span class="attr">loop</span>=<span class="string">"true"</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">height</span>=<span class="string">"20"</span> <span class="attr">hidden</span>=<span class="string">"true"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>又，添加可以控制播放的音乐。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">autoplay</span>=<span class="string">"autoplay"</span> <span class="attr">controls</span>=<span class="string">"controls"</span> <span class="attr">loop</span>=<span class="string">"loop"</span> <span class="attr">preload</span>=<span class="string">"auto"</span> <span class="attr">src</span>=<span class="string">"music.mp3"</span>&gt;</span>Your browser doesn't support H5 audio flag!<span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="https://kxp555.coding.me/2017/11/23/Linux%E4%B8%8B%E8%A7%86%E9%A2%91%E8%BD%ACgif/" target="_blank" rel="noopener">linux下视频转gif</a></li>
<li><a href="https://www.maketecheasier.com/run-bash-commands-background-linux/" target="_blank" rel="noopener">Running Bash Commands in the Background the Right Way [Linux]</a></li>
</ul>
</div></article><nav id="pagination"><div class="pagination"></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://s2.ax1x.com/2019/02/19/kgD6g0.png)"><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2019 By Yychi</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Work with <font color="#ffb3d1"><i class="fa fa-heartbeat fa-lg"> </i></font> by yychi</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.0"></script><script src="/js/fancybox.js?version=1.6.0"></script><script src="/js/sidebar.js?version=1.6.0"></script><script src="/js/copy.js?version=1.6.0"></script><script src="/js/fireworks.js?version=1.6.0"></script><script src="/js/transition.js?version=1.6.0"></script><script src="/js/scroll.js?version=1.6.0"></script><script src="/js/head.js?version=1.6.0"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"scale":0.7,"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":70,"height":180},"mobile":{"show":false,"scale":0.5},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>